/**
 * Version: 1
 * Web: https://fe-jw.github.io/SmartTab
 * GitHub: https://github.com/FE-jw/SmartTab
 * Released: 2022-11-07
*/

class SmartTab{constructor(t){this.options=t,this.btnWrap=document.querySelector(t.btnEle),this.btnLists=Array.prototype.slice.call(this.btnWrap.querySelectorAll("li")),this.btns=Array.prototype.slice.call(this.btnWrap.querySelectorAll("a")),this.contents=Array.prototype.slice.call(document.querySelectorAll(t.contentEle)),this.currentActiveIndex=void 0!==t.firstTabIndex?t.firstTabIndex:0,this.a11y(),this.init()}a11y(){let t=this.options,e=this.btnWrap,s=this.btnLists,a=this.btns,i=this.contents;e.role="tablist",s.forEach((t,e)=>{t.role="none",t.querySelector("a").dataset.index=e}),a.forEach(t=>{t.role="tab",t.ariaSelected=!1,t.setAttribute("aria-controls",t.hash.replace("#",""))}),i.forEach(e=>{e.role="tabpanel",e.tabIndex=0,t.tabOutline||(e.style.outline="none")})}init(){let t=this.options,e=this.currentActiveIndex,s=document.querySelector('a[data-index="'+e+'"]');s.classList.add(t.cssModeClass),s.ariaSelected=!0,document.getElementById(s.getAttribute("aria-controls")).classList.add(t.cssModeClass)}changeTab(t){let e=this.options,s=this.btnWrap,a=this.btns;a.forEach(a=>{a.addEventListener("click",function(a){if(a.preventDefault(),"false"==this.ariaSelected){let a=s.querySelector("a[aria-selected=true]"),i=a.getAttribute("aria-controls");a.ariaSelected=!1,a.classList.remove(e.cssModeClass),document.getElementById(i).classList.remove(e.cssModeClass),this.ariaSelected=!0,this.classList.add(e.cssModeClass);let l=window.scrollY,r=this.getAttribute("aria-controls");document.getElementById(r).classList.add(e.cssModeClass),document.getElementById(r).focus(),window.scrollTo(0,l),t&&t(this,this.dataset.index)}})})}}